const mongoose=require("mongoose"),Portfolio=require("../models/portfolioModel.min.js");var uri="https://my-json-server.typicode.com/bavShehata/bavlifyWeb/portfolios";const axios=require("axios");module.exports={getIndex:async(o,e)=>{try{uri="https://my-json-server.typicode.com/bavShehata/bavlifyWeb/portfolios";const o=(await axios.get(uri)).data;console.log("Number of portfolios: ",o.length),e.render("mainViews/index.ejs",{portfolios:o,contactSuccess:0})}catch(o){console.log("Couldn't show index page\n",o)}},deletePortfolios:async(o,e)=>{try{await Portfolio.deleteMany(),uri="https://my-json-server.typicode.com/bavShehata/bavlifyWeb/portfolios",await axios.delete(uri),console.log("All portfolios deleted successfully")}catch(o){console.log("Couldn't delete all portfolios\n",o)}},portfolioForm:async(o,e)=>{try{e.render("mainViews/portfolioOperations.ejs")}catch(o){console.log("Couldn't delete all portfolios\n",o)}},addPortfolio:async(o,e)=>{const{title:t,desktopURL:s,mobileURL:i,websiteURL:l}=o.body;try{var r=await Portfolio.create({title:t,desktopURL:s,mobileURL:i,websiteURL:l});uri="https://my-json-server.typicode.com/bavShehata/bavlifyWeb/portfolios",r={title:t,desktopURL:s,mobileURL:i,websiteURL:l},r=JSON.stringify(r),await axios.post(uri,r,{headers:{"Content-Type":"application/json"}}),console.log("Portfolio created successfully: ",t)}catch(o){console.log("Couldn't create portfolio\n",o)}}};